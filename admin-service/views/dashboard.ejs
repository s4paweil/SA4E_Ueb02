<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
</head>
<body>
    <h1>Admin Dashboard</h1>
    <div id="dashboardContent">
        <!-- Inhalte des Dashboards -->
    </div>
    <p id="errorMessage" style="color: red; display: none;"></p>

    <script>
        async function loadDashboard() {
            const token = localStorage.getItem('authToken'); // Token aus localStorage abrufen
            if (!token) {
                document.getElementById('errorMessage').textContent = 'Token fehlt. Bitte erneut anmelden.';
                document.getElementById('errorMessage').style.display = 'block';
                return;
            }

            try {
                const response = await fetch('/admin/dashboard', {
                    method: 'GET',
                    headers: {
                        'Authorization': `Bearer ${token}`, // Token im Authorization-Header
                    },
                });

                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('dashboardContent').textContent = JSON.stringify(data);
                } else {
                    const error = await response.json();
                    document.getElementById('errorMessage').textContent = error.message;
                    document.getElementById('errorMessage').style.display = 'block';
                }
            } catch (err) {
                console.error('Fehler beim Laden des Dashboards:', err);
                document.getElementById('errorMessage').textContent = 'Fehler beim Laden des Dashboards.';
                document.getElementById('errorMessage').style.display = 'block';
            }
        }

        // Dashboard-Daten laden
        loadDashboard();
    </script>
</body>
</html>
